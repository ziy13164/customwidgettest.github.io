System.register(["jimu-core","jimu-ui"],(function(e,t){var a={},l={};return{setters:[function(e){a.React=e.React,a.ReactRedux=e.ReactRedux,a.WidgetManager=e.WidgetManager,a.appActions=e.appActions,a.getAppStore=e.getAppStore},function(e){l.Button=e.Button,l.Col=e.Col,l.Label=e.Label,l.Option=e.Option,l.Row=e.Row,l.Select=e.Select}],execute:function(){e((()=>{var e={8891:e=>{"use strict";e.exports=a},726:e=>{"use strict";e.exports=l}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var r={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(r),o.d(r,{__set_webpack_public_path__:()=>s,default:()=>c});var e=o(8891),t=o(726);const a={title:"Control the Widget State",sidebarAlert:"You must select a collapsable sidebar widget.",opennessError:"Something went wrong with toggling widget openness.",sidebarLabel:"Collapsible sidebar widget:",sidebarPlaceholder:"Select a sidebar widget",sidebarButtonLabel:"Sidebar",widgetControllerWidgetLabel:"Widget within controller widget:",widgetControllerWidgetPlaceholder:"Select a widget controller widget",widgetControllerWidgetButton:"Toggle Open"},{useState:l,useEffect:i}=e.React,{useSelector:n}=e.ReactRedux;function c(o){const[r,c]=l(null),[s,d]=l(null),[g]=l(!0),[p,u]=l(!1),[m,b]=l({}),[w,h]=l([]),[R,S]=l([]),C=n((e=>e.widgetsState[r]));i((()=>{const t=(0,e.getAppStore)().getState().appConfig.widgets;b(t)}),[]),i((()=>{if(m){const e=Object.values(m);h(e),S(e.filter((e=>"widgets/layout/sidebar/"===e.uri)))}}),[m]);const f=t=>{var a,l;if(t)return(null===(l=null===(a=(0,e.getAppStore)().getState().widgetsRuntimeInfo)||void 0===a?void 0:a[t])||void 0===l?void 0:l.isClassLoaded)?Promise.resolve(e.WidgetManager.getInstance().getWidgetClass(t)):e.WidgetManager.getInstance().loadWidgetClass(t)};return e.React.createElement("div",{className:"widget-control-the-widget-state jimu-widget m-2",style:{width:"100%",height:"100%",maxHeight:"800px",padding:"0.5em"}},e.React.createElement("h6",{title:a.title},a.title),R&&R.length>0&&e.React.createElement(t.Row,{className:"p-2 justify-content-between align-items-center"},e.React.createElement(t.Col,{className:"col-sm-6"},e.React.createElement(t.Label,{title:a.sidebarLabel},a.sidebarLabel),e.React.createElement(t.Select,{defaultValue:"",onChange:e=>{c(e.currentTarget.value)},placeholder:a.sidebarPlaceholder,title:a.sidebarPlaceholder},R.map((a=>e.React.createElement(t.Option,{value:a.id},a.label))))),r&&e.React.createElement(t.Col,{className:"col-sm-6"},e.React.createElement(t.Button,{onClick:()=>{C&&!0===C.collapse?(0,e.getAppStore)().dispatch(e.appActions.widgetStatePropChange(r,"collapse",!g)):C&&!1===C.collapse?(0,e.getAppStore)().dispatch(e.appActions.widgetStatePropChange(r,"collapse",g)):alert(a.sidebarAlert)},htmlType:"submit",type:"primary",title:a.sidebarButtonLabel},a.sidebarButtonLabel))),w&&w.length>0&&e.React.createElement(t.Row,{className:"p-2 justify-content-between align-items-center"},e.React.createElement(t.Col,{className:"col-sm-6"},e.React.createElement(t.Label,{title:a.widgetControllerWidgetLabel},a.widgetControllerWidgetLabel),e.React.createElement(t.Select,{defaultValue:"",onChange:e=>{d(e.currentTarget.value)},placeholder:a.widgetControllerWidgetPlaceholder,title:a.widgetControllerWidgetPlaceholder},w.map((a=>e.React.createElement(t.Option,{value:a.id},a.label))))),s&&e.React.createElement(t.Col,{className:"col-sm-6"},e.React.createElement(t.Button,{onClick:()=>{!1===p?(()=>{const t=e.appActions.openWidget(s);f(s).then((()=>{(0,e.getAppStore)().dispatch(t)})).then((()=>{u(!0)}))})():!0===p?(()=>{const t=e.appActions.closeWidget(s);f(s).then((()=>{(0,e.getAppStore)().dispatch(t)})).then((()=>{u(!1)}))})():console.error(a.opennessError)},htmlType:"submit",type:"primary",title:a.widgetControllerWidgetButton},a.widgetControllerWidgetButton))))}function s(e){o.p=e}})(),r})())}}}));